#!/usr/bin/env sloth

let debug = true
let out = Directory("${$scriptDir}/build")

if not out.exists() {
  out.create()
}

func configure(release) {
  [
    'cmake', $scriptDir,
    "-DCMAKE_BUILD_TYPE=${release}",
    '--toolchain', './tool/toolchain.cmake',
    '-G', 'Ninja',
  ]!
}

with($cwd = out.path) {
  let release = if debug {'Debug'} else {'Release'}
  configure(release)
}
